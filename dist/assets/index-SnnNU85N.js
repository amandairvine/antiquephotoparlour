(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const L of r.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&d(L)}).observe(document,{childList:!0,subtree:!0});function c(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(s){if(s.ep)return;s.ep=!0;const r=c(s);fetch(s.href,r)}})();document.addEventListener("DOMContentLoaded",function(){console.log("Content loader started");let l="home",t=null;const c={services:"/pages/services/services.html",pricing:"/pages/pricing/pricing.html",themes:"/pages/themes/themes.html",frames:"/pages/frames/frames.html",faq:"/pages/frequently-asked-questions/frequently-asked-questions.html",contact:"/pages/contact/contact.html"};fetch("/header/header.html").then(e=>{if(console.log("Header response status:",e.status),!e.ok)throw new Error("Network response was not ok "+e.statusText);return e.text()}).then(e=>{const n=document.getElementById("header-container");if(n){n.innerHTML=e,console.log("Header content loaded into #header-container."),typeof adaptNavItems=="function"?(adaptNavItems(),console.log("adaptNavItems called after header content loaded (initial item placement).")):console.error("Error: adaptNavItems function not found."),typeof setupNavbarListeners=="function"?(setupNavbarListeners(),console.log("setupNavbarListeners called to attach click events.")):console.error("Error: setupNavbarListeners function not found."),s();const o=window.location.hash.substring(1);o&&c[o]?(console.log(`Loading page from initial hash: ${o}`),S(o,!1)):(console.log("No specific hash, loading home page."),d())}else console.warn("#header-container not found in the DOM.")}).catch(e=>console.error("Error loading header content:",e)),fetch("/footer/footer.html").then(e=>{if(console.log("Footer response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.text()}).then(e=>{const n=document.getElementById("footer-container");n?(n.innerHTML=e,console.log("Footer loaded successfully")):console.error("Footer container not found")}).catch(e=>{console.error("Error loading footer:",e)});function d(){fetch("/pages/home/slideshow/slideshow.html").then(e=>{if(console.log("Slideshow response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.text()}).then(e=>{console.log("Slideshow HTML loaded, length:",e.length);const n=document.querySelector(".content");n?(n.innerHTML=e,console.log("Slideshow content inserted"),t=e,l="home",setTimeout(()=>{C()},100)):console.error("Content container not found")}).catch(e=>{console.error("Error loading slideshow:",e)})}function s(){console.log("Setting up page navigation"),document.addEventListener("click",function(e){const n=e.target.closest("a[href]");if(!n)return;const o=n.getAttribute("href");if(o&&o.startsWith("../")&&!o.includes("facebook")&&!o.includes("instagram")){e.preventDefault(),console.log("Navigation clicked:",o);const i=r(o);i&&S(i)}}),window.addEventListener("popstate",function(e){e.state&&e.state.page?S(e.state.page,!1):S("home",!1)})}function r(e){return e.includes("services")?"services":e.includes("pricing")?"pricing":e.includes("themes")?"themes":e.includes("frames")?"frames":e.includes("frequently-asked-questions")?"faq":e.includes("contact")?"contact":e.includes("home")?"home":null}function L(e){const n=document.querySelector('link[id^="page-css-"]');if(n&&n.remove(),e!=="home"){const o=`../../css/pages/${e}.css`,i=document.createElement("link");i.rel="stylesheet",i.href=o,i.id=`page-css-${e}`,i.onerror=()=>{console.log(`No specific CSS file found for ${e} page (${o})`)},document.head.appendChild(i),console.log(`Loading CSS for ${e} page: ${o}`)}}async function S(e,n=!0){console.log("Loading page:",e);const o=document.querySelector(".content");if(!o){console.error("Content container not found");return}if(L(e),e==="home"){t?(o.innerHTML=t,l="home",setTimeout(()=>{C()},100)):d(),n&&history.pushState({page:"home"},"Home - Antique Photo Parlour","/");return}const i=c[e];if(!i){console.error("Route not found for page:",e);return}try{o.innerHTML='<div class="loading">Loading...</div>';const p=await fetch(i);if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const k=await p.text(),v=new DOMParser().parseFromString(k,"text/html"),m=`${e}-container`;let P=v.querySelector(`.${m}`);if(P){if(o.innerHTML=P.outerHTML,l=e,console.log(`Page ${e} loaded successfully`),n){const w=H(e);history.pushState({page:e},w,`#${e}`),document.title=w}if(e==="services"){const w=document.getElementById("services-script");w&&w.remove();const u=document.createElement("script");u.src="../../js/services.js",u.id="services-script",u.onload=()=>{console.log("services.js loaded dynamically. Calling initializeServicesPage..."),typeof initializeServicesPage=="function"?initializeServicesPage():console.error("Error: initializeServicesPage function not found after script load.")},document.body.appendChild(u)}}else if(console.error(`No identifiable content container (${m}) found in loaded page for injection.`),v.body)o.innerHTML=v.body.innerHTML,console.warn("Injected body content as a fallback, may not be ideal.");else throw new Error("No content found in loaded page to inject.")}catch(p){console.error(`Error loading page ${e}:`,p),o.innerHTML=`
      <div class="error-message">
        <h2>Sorry, we couldn't load this page.</h2>
        <p>Please try again or <a href="#" onclick="location.reload()">refresh the page</a>.</p>
      </div>
    `}}function H(e){return{home:"Antique Photo Parlour",services:"Services - Antique Photo Parlour",pricing:"Pricing - Antique Photo Parlour",themes:"Themes - Antique Photo Parlour",frames:"Frames - Antique Photo Parlour",faq:"FAQ - Antique Photo Parlour",contact:"Contact - Antique Photo Parlour"}[e]||"Antique Photo Parlour"}function C(){const e=document.querySelectorAll(".slide"),n=document.querySelector(".slideshow"),o=document.querySelector(".slideshow-nav-prev"),i=document.querySelector(".slideshow-nav-next"),p=document.querySelector(".slideshow-hover-left"),k=document.querySelector(".slideshow-hover-right");let g=0,v,m=!1,P=0,w=0;if(!e.length){console.log("No slides found, slideshow not initialized");return}console.log(`Slideshow initialized with ${e.length} slides`),e.forEach(a=>{const E=window.getComputedStyle(a).backgroundImage;if(E&&E!=="none"){a.style.setProperty("--slide-bg-image",E),a.style.backgroundImage="";const y=new Image;y.onload=function(){this.width>this.height?(a.classList.add("landscape"),console.log("Added landscape class to slide")):(a.classList.add("portrait"),console.log("Added portrait class to slide"))};const b=E.match(/url\(['"]?(.*?)['"]?\)/);b&&(y.src=b[1]),console.log("Set --slide-bg-image for slide:",E)}n.addEventListener("touchstart",y=>{P=y.changedTouches[0].screenX}),n.addEventListener("touchend",y=>{w=y.changedTouches[0].screenX,A()});function A(){const b=w-P;Math.abs(b)>50&&(h(),b>0?q():u(),f())}});function u(){m||(m=!0,e[g].classList.remove("active"),g=(g+1)%e.length,e[g].classList.add("active"),setTimeout(()=>{m=!1},2e3))}function q(){m||(m=!0,e[g].classList.remove("active"),g=(g-1+e.length)%e.length,e[g].classList.add("active"),setTimeout(()=>{m=!1},500))}function f(){h(),v=setInterval(u,4e3)}function h(){v&&clearInterval(v)}n&&o&&i&&(n.addEventListener("mouseenter",()=>{o.style.opacity="1",o.style.pointerEvents="auto",i.style.opacity="1",i.style.pointerEvents="auto",h()}),n.addEventListener("mouseleave",()=>{o.style.opacity="0",o.style.pointerEvents="none",i.style.opacity="0",i.style.pointerEvents="none",f()})),p&&p.addEventListener("click",()=>{h(),q(),f()}),k&&k.addEventListener("click",()=>{h(),u(),f()}),o&&o.addEventListener("click",a=>{a.stopPropagation(),h(),q(),f()}),i&&i.addEventListener("click",a=>{a.stopPropagation(),h(),u(),f()}),document.addEventListener("visibilitychange",function(){document.hidden?h():f()}),document.addEventListener("keydown",function(a){a.key==="ArrowRight"?(h(),u(),f()):a.key==="ArrowLeft"&&(h(),q(),f())}),f()}window.loadPage=S});let M=!1;const $=1024;function x(){console.log("--- setupNavbarListeners function called ---");const l=document.querySelector(".secondary-nav .flex-container");if(!l){console.warn("setupNavbarListeners: .secondary-nav .flex-container not found. Cannot attach click listeners.");return}const t=l.querySelector(".more-dropdown"),c=t?t.querySelector(".more-link"):null,d=t?t.querySelector(".dropdown-menu"):null;c&&d&&t?(console.log("Attaching click listeners for 'More' link and document."),c.removeEventListener("click",T),c.addEventListener("click",T),document.removeEventListener("click",I),document.addEventListener("click",I)):console.warn("Could not find 'More' link or dropdown menu elements to attach listeners in setupNavbarListeners.")}function T(l){const t=this.closest(".more-dropdown"),c=t.querySelector(".dropdown-menu");console.log("More link clicked! Inside toggleDropdown."),l.preventDefault(),window.getComputedStyle(t).display!=="none"?(c.classList.toggle("show"),t.classList.toggle("open"),console.log("Dropdown menu 'show' class toggled. Current state:",c.classList.contains("show")?"visible":"hidden")):console.log("More dropdown is not visible (CSS display: none), so not toggling.")}function I(l){const t=document.querySelector(".more-dropdown"),c=t.querySelector(".dropdown-menu");window.getComputedStyle(t).display!=="none"&&!t.contains(l.target)&&c.classList.contains("show")&&(c.classList.remove("show"),t.classList.remove("open"),console.log("Clicked outside 'More' dropdown. Dropdown menu closed."))}function D(){console.log("--- adaptNavItems function called ---"),console.log("Current window width:",window.innerWidth);const l=document.querySelector(".secondary-nav .flex-container");if(!l){console.warn("adaptNavItems: .secondary-nav .flex-container not found.");return}const t=l.querySelector(".more-dropdown"),c=t.querySelector(".dropdown-menu"),d=[...l.querySelectorAll(".move-to-dropdown")],s=window.innerWidth<$;console.log("newIsMobileView:",s,"isMobileView (previous):",M),s!==M?(console.log("Breakpoint crossed! Transitioning to:",s?"Mobile View":"Desktop View"),s?(console.log("Moving movable items into dropdown menu..."),d.forEach(r=>{c.appendChild(r),console.log("Moved:",r.textContent.trim())}),c.classList.remove("show"),console.log("Dropdown menu class 'show' removed (ensuring hidden).")):(console.log("Moving movable items back to main navigation..."),d.forEach(r=>{l.insertBefore(r,t),console.log("Moved back:",r.textContent.trim())}),c.classList.remove("show"),console.log("Dropdown menu class 'show' removed (ensuring hidden).")),M=s,console.log("isMobileView updated to:",M)):console.log("No breakpoint crossed. No DOM manipulation needed.")}document.addEventListener("DOMContentLoaded",function(){console.log("DOM loaded. Initializing navbar..."),D(),x()});window.addEventListener("resize",D);
